<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
  <meta charset="UTF-8">
  <title>Memes</title>
  <!--    <link rel='stylesheet' href="/stylesheets/style.css">-->
  <!--    <script src="/scripts/html2canvas.js"></script>-->
  <link href="../public/stylesheets/style.css" rel='stylesheet'>
  <script src="../public/scripts/html2canvas.js"></script>
</head>
<body>
<div class="first-state buttons-container" id="start-buttons">
  <button class="page-button" id="miu" tabindex="-1">
    <input accept="image/*" id="upload-b-button" onchange="uploadMeme(this.files[0])" tabindex="1" title="upload pic"
           type="file">
    <label id="upload-b"> upload pic </label>
  </button>
  <button class="page-button" id="generate-b" onclick="randomPressed()" tabindex="2"> random</button>
  <button class="page-button" id="gallery-b" onclick="openModalWindow()" tabindex="3">gallery</button>
  <div class="cursor"></div>
</div>
<div class="modal" id="myModal" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <span class="close" onclick="closeModalWindow()">Ã—</span>
      <h2>Choose image</h2>
    </div>
    <div class="modal-body" style="overflow:auto;">
    </div>
    <button className="first-state" id="next-b" onclick="downloadImgToGallery()">Next</button>
    <p1 id="counter" style="display: none">0</p1>
  </div>
</div>

<div class="div-for-images editor-block second-state" id="div-for-images">
  <div id="meme-container">
    <img alt="mem image" draggable="false" id='mem-image'>
  </div>
</div>

<div id="text-generator-form">
  <form class="form-for-text-editing editor-block second-state">
    <h1>Add your text:</h1>
    <ul class="form-content">
      <li>
        Text:
        <textarea type="text" id="text-input" class="form-field"></textarea>
      </li>
      <li>
        Align:
        <select id="align" class="form-field">
          <option selected>left</option>
          <option>center</option>
          <option>right</option>
        </select>
      </li>
      <li>
          Font:
            <select id="font-select" class="form-field">
                <option>Tahoma</option>
                <option>Great Vibes</option>
                <option>Georgia</option>
                <option>EB Garamond</option>
                <option>Jost</option>
                <option>Pattaya</option>
                <option>Playfair Display</option>
                <option>Roboto</option>
            </select>
        </li>
      <li>
        Size:
        <input class="form-field" id="size-input" type="number" value="100">
      </li>
      <li>
        Color:
        <input class="form-field" id="text-color" type="color" value="#0b7481">
      </li>
      <li>
        <button class="form-btn" id="generate-btn" type="button">Generate</button>
      </li>
      <li>
        <div id="generated-text">
          <ul id="text-list"></ul>
        </div>
      </li>
    </ul>
  </form>
</div>

<div class="second-state buttons-container" id="editor-page-buttons">
  <button class='page-button' id='back-b' onclick="backPressed()"> back</button>
  <button class='page-button' id='download-b' onclick="downloadResult()"> download</button>
  <div class="cursor"></div>
</div>

<script src="../public/scripts/index.js"></script>
<script>
    function downloadResult() {
        html2canvas(document.getElementById('meme-container')).then(function (canvas) {
            let a = document.createElement('a');
            let imageType = 'image/png';
            a.href = canvas.toDataURL(imageType, 0.9).replace(imageType, "image/octet-stream");
            a.download = 'your-meme.' + imageType.split('/')[1];
            a.click();
        });
    }
</script>
</body>
</html>